<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åå°„ç¥çµŒãƒ†ã‚¹ãƒˆ | VexTools</title>
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6703043752248417" crossorigin="anonymous"></script>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ› ï¸</text></svg>">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .no-select { user-select: none; -webkit-user-select: none; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 min-h-screen flex flex-col no-select">

    <header class="p-4 bg-white shadow-sm absolute w-full top-0 z-50">
        <a href="../index.html" class="text-blue-600 font-bold hover:underline">
            <i class="fa-solid fa-arrow-left"></i> TOPã«æˆ»ã‚‹
        </a>
    </header>

    <main id="gameArea" class="flex-grow flex flex-col items-center justify-center text-center p-4 cursor-pointer transition-colors duration-200 bg-blue-600 text-white">
        
        <div id="startScreen">
            <i class="fa-solid fa-bolt text-6xl mb-4 animate-bounce"></i>
            <h1 class="text-4xl font-bold mb-4">åå°„ç¥çµŒãƒ†ã‚¹ãƒˆ</h1>
            <p class="text-xl mb-8 opacity-90">ç”»é¢ãŒç·‘ã«ãªã£ãŸã‚‰ã‚¿ãƒƒãƒ—ï¼</p>
            <p class="text-sm border border-white/50 rounded-full px-4 py-2 inline-block">ç”»é¢ã®ã©ã“ã§ã‚‚ã‚¿ãƒƒãƒ—ã—ã¦ã‚¹ã‚¿ãƒ¼ãƒˆ</p>
        </div>

        <div id="waitScreen" class="hidden">
            <i class="fa-solid fa-ellipsis text-6xl mb-4"></i>
            <h2 class="text-4xl font-bold">ã¾ã ...</h2>
        </div>

        <div id="clickScreen" class="hidden">
            <i class="fa-solid fa-hand-pointer text-6xl mb-4"></i>
            <h2 class="text-4xl font-bold">ä»Šã ï¼ï¼ï¼</h2>
        </div>

        <div id="resultScreen" class="hidden">
            <p class="text-sm mb-2">ã‚ãªãŸã®è¨˜éŒ²</p>
            <h2 class="text-6xl font-bold mb-6"><span id="score">0</span> ms</h2>
            <p id="rank" class="text-xl font-bold mb-8 text-yellow-300"></p>
            
            <button id="retryBtn" class="bg-white text-blue-900 font-bold py-3 px-8 rounded-full text-lg shadow-lg hover:bg-gray-100 transition z-50 relative">
                ã‚‚ã†ä¸€åº¦ã‚„ã‚‹
            </button>
        </div>

    </main>

    <script>
        const gameArea = document.getElementById('gameArea');
        const startScreen = document.getElementById('startScreen');
        const waitScreen = document.getElementById('waitScreen');
        const clickScreen = document.getElementById('clickScreen');
        const resultScreen = document.getElementById('resultScreen');
        const scoreDisplay = document.getElementById('score');
        const rankDisplay = document.getElementById('rank');
        const retryBtn = document.getElementById('retryBtn');

        let startTime = 0;
        let timeoutId = null;
        let gameState = 'start'; // start, waiting, clickable, result

        gameArea.addEventListener('mousedown', handleInput);
        gameArea.addEventListener('touchstart', handleInput);

        function handleInput(e) {
            if(e.target === retryBtn) return; // ãƒªãƒˆãƒ©ã‚¤ãƒœã‚¿ãƒ³ãªã‚‰ç„¡è¦–
            e.preventDefault();

            if (gameState === 'start') {
                startGame();
            } else if (gameState === 'waiting') {
                earlyClick();
            } else if (gameState === 'clickable') {
                finishGame();
            } else if (gameState === 'result') {
                // çµæœç”»é¢ã§ã¯ä½•ã‚‚ã—ãªã„ï¼ˆãƒªãƒˆãƒ©ã‚¤ãƒœã‚¿ãƒ³å¾…ã¡ï¼‰
            }
        }

        retryBtn.addEventListener('click', (e) => {
            e.stopPropagation(); // è¦ªè¦ç´ ã¸ã®ä¼æ’­ã‚’æ­¢ã‚ã‚‹
            resetGame();
        });

        function startGame() {
            gameState = 'waiting';
            showScreen(waitScreen);
            gameArea.className = "flex-grow flex flex-col items-center justify-center text-center p-4 cursor-pointer transition-colors duration-200 bg-red-500 text-white";
            
            // 2ã€œ5ç§’å¾Œã«ç·‘ã«ã™ã‚‹
            const randomTime = Math.floor(Math.random() * 3000) + 2000;
            timeoutId = setTimeout(() => {
                gameState = 'clickable';
                startTime = Date.now();
                showScreen(clickScreen);
                gameArea.className = "flex-grow flex flex-col items-center justify-center text-center p-4 cursor-pointer transition-colors duration-none bg-green-500 text-white";
            }, randomTime);
        }

        function earlyClick() {
            clearTimeout(timeoutId);
            gameState = 'result';
            gameArea.className = "flex-grow flex flex-col items-center justify-center text-center p-4 cursor-pointer transition-colors duration-200 bg-slate-800 text-white";
            showScreen(resultScreen);
            scoreDisplay.innerText = "---";
            rankDisplay.innerText = "æ—©ã™ãã¾ã™ï¼ãŠæ‰‹ã¤ãâš ï¸";
            rankDisplay.className = "text-xl font-bold mb-8 text-red-400";
        }

        function finishGame() {
            const endTime = Date.now();
            const time = endTime - startTime;
            gameState = 'result';
            
            gameArea.className = "flex-grow flex flex-col items-center justify-center text-center p-4 cursor-pointer transition-colors duration-200 bg-blue-600 text-white";
            showScreen(resultScreen);
            scoreDisplay.innerText = time;
            
            // ãƒ©ãƒ³ã‚¯åˆ¤å®š
            let rankText = "";
            let rankColor = "text-white";
            if(time < 200) { rankText = "ç¥ãƒ¬ãƒ™ãƒ«ï¼âš¡"; rankColor = "text-yellow-300"; }
            else if(time < 250) { rankText = "ãƒ—ãƒ­ã‚²ãƒ¼ãƒãƒ¼ç´š ğŸ®"; rankColor = "text-cyan-300"; }
            else if(time < 300) { rankText = "å¹³å‡ã‚ˆã‚Šé€Ÿã„ ğŸ‘"; rankColor = "text-green-300"; }
            else { rankText = "ã‚‚ã£ã¨é ‘å¼µã‚ã† ğŸ¢"; rankColor = "text-gray-300"; }
            
            rankDisplay.innerText = rankText;
            rankDisplay.className = `text-xl font-bold mb-8 ${rankColor}`;
        }

        function resetGame() {
            gameState = 'start';
            showScreen(startScreen);
            gameArea.className = "flex-grow flex flex-col items-center justify-center text-center p-4 cursor-pointer transition-colors duration-200 bg-blue-600 text-white";
        }

        function showScreen(screen) {
            [startScreen, waitScreen, clickScreen, resultScreen].forEach(s => s.classList.add('hidden'));
            screen.classList.remove('hidden');
        }
    </script>
</body>
</html>